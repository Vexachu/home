<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Typing Skills</title>
  <link rel="stylesheet" href="../../assets/style.css">
  <style>
    .options {display:flex;flex-wrap:wrap;gap:12px;margin-bottom:10px;align-items:center}
    .options label {font-size:.85rem;color:var(--muted)}
  </style>
</head>
<body>
<header class="header">
  <div class="nav container">
    <div class="brand"><div class="logo"></div> Typing</div>
    <nav>
      <a class="button secondary" href="../../index.html">Home</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="kicker">Foundation</div>
    <h1 class="h1">Typing Skills</h1>
    <p class="sub">Accuracy first, then speed. Practice with random prompts — you can toggle symbols/numbers and set the timer length.</p>
  </section>

  <section class="card" style="padding:18px">
    <div class="options">
      <label><input type="checkbox" id="useSymbols" checked> Include numbers & symbols</label>
      <label>Time:
        <select id="duration">
          <option value="15">15s</option>
          <option value="30" selected>30s</option>
          <option value="60">60s</option>
        </select>
      </label>
    </div>

    <div class="row" style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div>
        <div class="tag">Prompt</div>
        <div id="prompt" style="margin-top:6px"></div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <span class="tag">Time left: <span id="time">0</span>s</span>
        <span class="tag">WPM: <span id="wpm">0</span></span>
        <span class="tag">Accuracy: <span id="acc">100%</span></span>
        <button id="new" class="button secondary">New prompt</button>
      </div>
    </div>
    <textarea id="input" placeholder="Type here..." style="margin-top:12px"></textarea>
    <div class="badge">Tip: Prompts are random words. Toggle symbols/numbers for extra challenge.</div>
  </section>
</main>

<footer class="footer">© <span id="year"></span> Vex • Typing</footer>
<script>document.getElementById('year').textContent=new Date().getFullYear()</script>
<script>
const wordBank = [
  "print","function","loop","array","const","hello","world","return",
  "keyboard","screen","python","while","input","class","object","code",
  "debug","value","true","false","index","string","var","random",
  "public","static","int","char","if","else","elif","case","break",
  "math","sum","max","min","sqrt","len","sort","map","filter"
];
const symbols = ["{","}","[","]","(",")",";","=","+","-","*","/","%","<",">","!",":","'","\"","`","|","&","#","@","?","1","2","3","4","5","6","7","8","9","0"];

let promptEl = document.getElementById('prompt');
let inputEl = document.getElementById('input');
let timeEl = document.getElementById('time');
let wpmEl = document.getElementById('wpm');
let accEl = document.getElementById('acc');
let newBtn = document.getElementById('new');
let durationEl = document.getElementById('duration');
let useSymbolsEl = document.getElementById('useSymbols');

let current="", timer=null, remaining=0, started=false, correct=0, errors=0;

function generatePrompt(){
  let pool = [...wordBank];
  if(useSymbolsEl.checked) pool = pool.concat(symbols);
  let words=[];
  for(let i=0;i<8;i++){
    words.push(pool[Math.floor(Math.random()*pool.length)]);
  }
  return words.join(" ");
}

function newPrompt(){
  current = generatePrompt();
  promptEl.textContent = current;
  inputEl.value="";
  remaining=parseInt(durationEl.value);
  timeEl.textContent=remaining;
  wpmEl.textContent="0";
  accEl.textContent="100%";
  started=false;
  if(timer) clearInterval(timer);
}
newPrompt();

function startTimer(){
  timer=setInterval(()=>{
    remaining--;
    timeEl.textContent=remaining;
    if(remaining<=0){
      clearInterval(timer);
      inputEl.disabled=true;
    }
  },1000);
}

inputEl.addEventListener('input', ()=>{
  if(!started){
    started=true;
    inputEl.disabled=false;
    startTimer();
  }
  let typed=inputEl.value;
  errors=0; correct=0;
  for(let i=0;i<typed.length;i++){
    if(typed[i]===current[i]) correct++; else errors++;
  }
  let acc = Math.max(0,Math.round(100*correct/Math.max(typed.length,1)));
  accEl.textContent=acc+"%";
  let elapsed=(parseInt(durationEl.value)-remaining)/60;
  let wpm=Math.round((typed.length/5)/(elapsed||1/60));
  wpmEl.textContent=wpm;
});

newBtn.addEventListener('click', ()=>{
  inputEl.disabled=false;
  newPrompt();
  inputEl.focus();
});
</script>
</body>
</html>
